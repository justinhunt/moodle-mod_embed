{"version":3,"file":"smartframe.min.js","sources":["../src/smartframe.js"],"sourcesContent":["define(['jquery', 'core/log'], function($, log) {\n  \"use strict\"; // jshint ;_;\n\n  /*\n  This file is to manage the quiz stage\n   */\n\n  log.debug('Poodll Embed SmartFrame: initialising');\n\n  return {\n\n    //for making multiple instances\n      clone: function () {\n          return $.extend(true, {}, this);\n     },\n\n    init: function(itemdata) {\n      this.register_events(itemdata);\n    },\n\n    register_events: function(itemdata) {\n      \n      var self = this;\n\n\n      //listen for the grades\n      window.addEventListener(\"message\", function(event) {\n        log.debug('messageevent',event);\n\n            //if its not really our smartframe host get out of here\n            if (event.origin !== itemdata.smartframehost) {\n                return;\n            }\n            //pass back results and transition\n            var gradesdata = event.data;\n            //each instance of teacher tools itemtype will catch this event, so we need to filter the ones we handle to just this instanc\n           //thats why we pass the itemdata around\n            if(typeof gradesdata != 'undefined' && gradesdata.itemid == itemdata.id) {\n                var thepercent = gradesdata.percent;\n\n                $(\".minilesson_nextbutton\").prop(\"disabled\", true);\n                setTimeout(function () {\n                    $(\".minilesson_nextbutton\").prop(\"disabled\", false);\n                    self.next_question(gradesdata.percent);\n                }, 500);\n            }\n          }, false\n      );\n      \n    }\n  };\n});"],"names":["define","$","log","debug","clone","extend","this","init","itemdata","register_events","self","window","addEventListener","event","origin","smartframehost","gradesdata","data","itemid","id","percent","prop","setTimeout","next_question"],"mappings":"AAAAA,8BAAO,CAAC,SAAU,aAAa,SAASC,EAAGC,YAOzCA,IAAIC,MAAM,yCAEH,CAGHC,MAAO,kBACIH,EAAEI,QAAO,EAAM,GAAIC,OAGhCC,KAAM,SAASC,eACRC,gBAAgBD,WAGvBC,gBAAiB,SAASD,cAEpBE,KAAOJ,KAIXK,OAAOC,iBAAiB,WAAW,SAASC,UAC1CX,IAAIC,MAAM,eAAeU,OAGjBA,MAAMC,SAAWN,SAASO,oBAI1BC,WAAaH,MAAMI,aAGC,IAAdD,YAA6BA,WAAWE,QAAUV,SAASW,GAAI,CACpDH,WAAWI,QAE5BnB,EAAE,0BAA0BoB,KAAK,YAAY,GAC7CC,YAAW,WACPrB,EAAE,0BAA0BoB,KAAK,YAAY,GAC7CX,KAAKa,cAAcP,WAAWI,WAC/B,UAEN"}